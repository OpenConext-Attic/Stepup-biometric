!function(t){"use strict";var i=360,e={seconds:10,color:"rgba(255, 255, 255, 0.8)",height:null,width:null,elementID:null,accrued_time:0},s=40,n="pie_timer",h="pie_timer",a=3*Math.PI/2,r=Math.PI/180,c=function(t,e,s){null===e.width&&(e.width=t.width()),null===e.height&&(e.height=t.height()),this.settings=e,this.jquery_object=t,this.interval_id=null,this.current_value=i,this.initial_time=new Date,this.accrued_time=this.settings.accrued_time,this.callback=s,this.is_paused=!0,this.is_reversed="undefined"!=typeof e.is_reversed?e.is_reversed:!1,this.jquery_object.html('<canvas class="'+n+'" width="'+e.width+'" height="'+e.height+'"></canvas>'),this.canvas=this.jquery_object.children("."+n)[0],this.pieSeconds=this.settings.seconds};c.prototype={start:function(){this.is_paused&&(this.initial_time=new Date-this.accrued_time,this.current_value<=0&&(this.current_value=i),this.interval_id=setInterval(t.proxy(this.run_timer,this),s),this.is_paused=!1)},pause:function(){this.is_paused||(this.accrued_time=new Date-this.initial_time,clearInterval(this.interval_id),this.is_paused=!0)},run_timer:function(){if(this.canvas.getContext){if(this.elapsed_time=(new Date-this.initial_time)/1e3,this.current_value=i*Math.max(0,this.settings.seconds-this.elapsed_time)/this.settings.seconds,this.settings.elementID){var e=Math.ceil(this.current_value/i*this.settings.seconds);this.pieSeconds!==e&&(this.pieSeconds=e,t("#"+this.settings.elementID).html(this.pieSeconds))}if(this.current_value<=0)clearInterval(this.interval_id),this.canvas.width=this.settings.width,t.isFunction(this.callback)&&this.callback.call(),this.is_paused=!0;else{this.canvas.width=this.settings.width;var s=this.canvas.getContext("2d"),n=[this.canvas.width,this.canvas.height],h=Math.min(n[0],n[1])/2,c=[n[0]/2,n[1]/2],l=this.is_reversed;s.beginPath(),s.moveTo(c[0],c[1]);var u=a;s.arc(c[0],c[1],h,l?u-(360-this.current_value)*r:u-this.current_value*r,u,l),s.closePath(),s.fillStyle=this.settings.color,s.fill()}}}};var l=function(i,s){var n=t.extend({},e,i);return this.each(function(){var i=t(this),e=new c(i,n,s);i.data(h,e)})},u=function(i){i in c.prototype||t.error("Method "+i+" does not exist on jQuery.pietimer");var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var s=t(this),n=s.data(h);return n?void n[i].apply(n,e):!0})};t.fn.pietimer=function(t){return"object"!=typeof t&&t?u.apply(this,arguments):l.apply(this,arguments)}}(jQuery);